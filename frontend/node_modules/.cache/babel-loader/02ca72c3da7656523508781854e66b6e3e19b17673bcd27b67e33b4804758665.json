{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\dsmel\\\\OneDrive\\\\Desktop\\\\VRAI PROJET\\\\go-fullstack\\\\frontend\\\\src\\\\Reservations\\\\Reservations.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Reservations() {\n  _s();\n  const [reservations, setReservations] = useState([]);\n  const userId = localStorage.getItem(\"userId\");\n  useEffect(() => {\n    fetchReservations();\n  }, []);\n  const fetchReservations = async () => {\n    try {\n      const res = await fetch(`http://localhost:3000/reservations/user/${userId}`);\n      const data = await res.json();\n      setReservations(data);\n    } catch (error) {\n      console.error(\"Erreur lors du chargement des r√©servations :\", error);\n    }\n  };\n  const handleDelete = async reservationId => {\n    try {\n      const res = await fetch(`http://localhost:3000/reservations/${reservationId}`, {\n        method: \"DELETE\"\n      });\n      if (res.ok) {\n        // Supprime la r√©servation de la liste sans recharger toute la page\n        setReservations(prev => prev.filter(r => r.Id_Reservation !== reservationId));\n      } else {\n        console.error(\"√âchec de la suppression\");\n      }\n    } catch (error) {\n      console.error(\"Erreur lors de la suppression :\", error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"reservations-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Mes r\\xE9servations\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this), reservations.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Aucune r\\xE9servation trouv\\xE9e.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }, this) : reservations.map(reservation => {\n      var _reservation$traverse, _reservation$traverse2, _reservation$traverse3, _reservation$traverse4, _reservation$traverse5, _reservation$traverse6, _reservation$traverse7, _reservation$traverse8, _reservation$traverse9, _reservation$traverse10;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"reservation-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\uD83D\\uDEF3 Bateau : \", (_reservation$traverse = reservation.traversee) === null || _reservation$traverse === void 0 ? void 0 : (_reservation$traverse2 = _reservation$traverse.bateau) === null || _reservation$traverse2 === void 0 ? void 0 : _reservation$traverse2.nom]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\uD83D\\uDCCD De : \", (_reservation$traverse3 = reservation.traversee) === null || _reservation$traverse3 === void 0 ? void 0 : (_reservation$traverse4 = _reservation$traverse3.liaison) === null || _reservation$traverse4 === void 0 ? void 0 : (_reservation$traverse5 = _reservation$traverse4.portDepart) === null || _reservation$traverse5 === void 0 ? void 0 : _reservation$traverse5.nom]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\uD83D\\uDCCD \\xC0 : \", (_reservation$traverse6 = reservation.traversee) === null || _reservation$traverse6 === void 0 ? void 0 : (_reservation$traverse7 = _reservation$traverse6.liaison) === null || _reservation$traverse7 === void 0 ? void 0 : (_reservation$traverse8 = _reservation$traverse7.portArrivee) === null || _reservation$traverse8 === void 0 ? void 0 : _reservation$traverse8.nom]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\uD83D\\uDCC5 Date : \", (_reservation$traverse9 = reservation.traversee) === null || _reservation$traverse9 === void 0 ? void 0 : _reservation$traverse9.dateT]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\uD83D\\uDD52 Heure : \", (_reservation$traverse10 = reservation.traversee) === null || _reservation$traverse10 === void 0 ? void 0 : _reservation$traverse10.heure]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleDelete(reservation.Id_Reservation),\n          className: \"reservation-delete-btn\",\n          children: \"Supprimer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 13\n        }, this)]\n      }, reservation.Id_Reservation, true, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 11\n      }, this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 5\n  }, this);\n}\n_s(Reservations, \"n1GCS9VJe9p98Kw6tsz1Wmk1YmA=\");\n_c = Reservations;\nexport default Reservations;\nvar _c;\n$RefreshReg$(_c, \"Reservations\");","map":{"version":3,"names":["React","useEffect","useState","jsxDEV","_jsxDEV","Reservations","_s","reservations","setReservations","userId","localStorage","getItem","fetchReservations","res","fetch","data","json","error","console","handleDelete","reservationId","method","ok","prev","filter","r","Id_Reservation","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","reservation","_reservation$traverse","_reservation$traverse2","_reservation$traverse3","_reservation$traverse4","_reservation$traverse5","_reservation$traverse6","_reservation$traverse7","_reservation$traverse8","_reservation$traverse9","_reservation$traverse10","traversee","bateau","nom","liaison","portDepart","portArrivee","dateT","heure","onClick","_c","$RefreshReg$"],"sources":["C:/Users/dsmel/OneDrive/Desktop/VRAI PROJET/go-fullstack/frontend/src/Reservations/Reservations.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\n\r\nfunction Reservations() {\r\n  const [reservations, setReservations] = useState([]);\r\n  const userId = localStorage.getItem(\"userId\");\r\n\r\n  useEffect(() => {\r\n    fetchReservations();\r\n  }, []);\r\n\r\n  const fetchReservations = async () => {\r\n    try {\r\n      const res = await fetch(`http://localhost:3000/reservations/user/${userId}`);\r\n      const data = await res.json();\r\n      setReservations(data);\r\n    } catch (error) {\r\n      console.error(\"Erreur lors du chargement des r√©servations :\", error);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (reservationId) => {\r\n    try {\r\n      const res = await fetch(`http://localhost:3000/reservations/${reservationId}`, {\r\n        method: \"DELETE\",\r\n      });\r\n\r\n      if (res.ok) {\r\n        // Supprime la r√©servation de la liste sans recharger toute la page\r\n        setReservations((prev) =>\r\n          prev.filter((r) => r.Id_Reservation !== reservationId)\r\n        );\r\n      } else {\r\n        console.error(\"√âchec de la suppression\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Erreur lors de la suppression :\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"reservations-page\">\r\n      <h1>Mes r√©servations</h1>\r\n      {reservations.length === 0 ? (\r\n        <p>Aucune r√©servation trouv√©e.</p>\r\n      ) : (\r\n        reservations.map((reservation) => (\r\n          <div key={reservation.Id_Reservation} className=\"reservation-card\">\r\n            <p>üõ≥ Bateau : {reservation.traversee?.bateau?.nom}</p>\r\n            <p>üìç De : {reservation.traversee?.liaison?.portDepart?.nom}</p>\r\n            <p>üìç √Ä : {reservation.traversee?.liaison?.portArrivee?.nom}</p>\r\n            <p>üìÖ Date : {reservation.traversee?.dateT}</p>\r\n            <p>üïí Heure : {reservation.traversee?.heure}</p>\r\n\r\n            <button\r\n              onClick={() => handleDelete(reservation.Id_Reservation)}\r\n              className=\"reservation-delete-btn\"\r\n            >\r\n              Supprimer\r\n            </button>\r\n          </div>\r\n        ))\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Reservations;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}